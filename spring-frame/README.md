一：ribbon
1：概念
spring cloud ribbon是基于netflix ribbon实现的一套客户端，负载均衡的工具
主要功能是提供客户端的软件负载均衡算法和服务调用。
ribbon客户端组件提供一系列完善的配置选项如连接超时，重试等。简单来说，就是在配置文件中列出load balance后面所有的机器，
ribbon会自动的帮助你基于某种规则（简单轮询，随机连接）去连接这些机器
也就是负载均衡+restTemplate调用
2：作用
（1）负载均衡是什么
简单来说就是将用户的请求平摊的分配到多个服务器上，从而达到系统的高可用；常见的负载均衡软件有nginx、lvs
（2）ribbon本地负载均衡与nginx服务端负载均衡区别
nginx是服务器负载均衡，客户端所有请求都会交给nginx，然后由nginx实现转发请求。即负载均衡是由服务端实现
ribbon本地负载均衡，在调用微服务接口时，会在注册中心上获取注册信息服务列表之后缓存到本地jvm，从而在本地jvm实现rpc远程调用
3：架构说明


eureka server<--------------------------注册-------------------------- 服务提供者实例1
|        |
|        |
|        |
|        |
|        |
|        |
注册  查询可用服务列表
|        |
|        |
|        |
|        |
|        |
  ribbon --------------------------------------------------------------> 服务提供者实例3
  
  
二：openFeign
1：概述

2：openFeign的作用
在实际开发中，由于对服务依赖的调用可能不止一处，往往一个接口会被多处调用，所以通常都会针对每个微服务自行封装一些客户端类
来包装这些依赖服务的调用。feign会集成ribbon

3：openfeign使用步骤
（1）接口加注解：微服务调用接口+@FeignClient
（2）启动类加入@EnableFeignClient
（3）接口添加注解@FeignClient("注册服务名")

4：openfeign超时控制
默认feign客户端只等待1s，但是服务端处理需要超过1s，导致feign客户端会直接返回错误，这时我们需要设置feign客户端超时控制
在yml文件中开启配置
#设置feign客户端超时时间（OpenFeign默认支持ribbon）
ribbon:
  #指的是建立连接所用的时间，适用于网络状况正常的情况下，两端连接所用的实际
  ReadTimeout: 5000
  #指的是建立连接后从服务器读取到可用资源所用的时间
  ConnectTimeout: 5000
  
5：openFeign的日志打印功能
（1）该功能可以对feign接口的调用情况进行监控和输出
（2）日志级别
   （1）NONE：默认的，不显示任何日志
   （2）BASIC：仅记录请求方法、URL、响应状态码及执行时间
   （3）HEADERS：除了BASIC中定义的信息之外，还有请求和响应的头信息
   （4）FULL：除了HEADERS中定义的信息之外，还有请求和响应的正文信息及元数据
（3）步骤
   （1）创建配置文件
   （2）yml设置feign日志以什么级别监控哪个接口
   
三：gateway
1：具有特性
（1）动态路由：能够匹配任何请求属性
（2）可以对路由指定Predicate（断言）和filter（过滤器）
（3）集成断路器功能
（4）集成spring cloud服务发现功能
（5）请求限流功能
（6）支持路径重写
2：三大核心概念
（1）Route（路由）：构建网关的基本模块，由id，目标uri，一系列的断言和过滤器组成，如果断言为true则匹配该路由
（2）Predicate（断言）：开发人员可以匹配Http请求中的所有内容（请求头或请求参数），请求与断言匹配则进行路由
（3）Filter（过滤）：可以在请求被路由前后对请求进行修改
3：工作流程
（1）客户端向spring cloud gateway发出请求。
（2）在gateway handler mapping中找到与请求匹配的路由
（3）将请求发送到gateway web handler
（4）handler再通过指定的过滤器链来将请求发送到我们实际的服务执行逻辑，然后返回
（5）过滤器可能会在发送代理请求之前（pre）或之后执行业务（post）逻辑
Filter可以在之前做参数检验、权限检验、流量监控、日志输出、协议转换等；在之后可以做响应内容、响应头的修改，日志输出、流量监控等
4：动态路由：
默认情况下gateway会根据注册中心注册的服务列表以注册中心上微服务名为路径创建动态路由进行转发，从而实现动态路由的功能
5：Predicate的使用
（1）是什么
6：Filter
（1）




